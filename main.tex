\documentclass[a4paper,11pt,makeidx]{report} % Font size

\usepackage{makeidx}
\usepackage{color}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage[nohyphen]{underscore}

\hypersetup{colorlinks=true}
%%% AH Macros
\long\def\comment#1{}
\def\pipkw{\tt\bf\color{blue}}%
\def\pipterm#1{\index{#1}{\pipkw #1}}%
\def\PIPID{\pipterm{PIPID}}%
\def\NULL{\tt NULL}%

\lstloadlanguages{C,csh}

\lstset{basicstyle=\small\tt, numberbychapter=true, showstringspaces=false,
  emph={pip_get_pipid, pip_get_ntasks,
    pip_init, pip_fin,
    pip_spawn, pip_wait, pip_wait_any,
    pip_task_spawn, pip_spawn_program_t,
    pip_spawn_from_func, pip_spawn_from_main, 
    pip_named_export, pip_named_import, pip_exit, 
    pip_barrier_init, pip_barrier_wait, pip_barrier_fin,
    pip_barrier_t, pip_gettime,
    PIP_PIPID_ROOT, PIP_PIPID_ANY, PIP_PIPID_MYSELF, 
    PIP_CPUCORE_ASIS, PIP_MODE_PTHREAD, PIP_MODE_PROCESS,
    pip-exec, pipcc, pipfc, pip-mode, printpipmode}, 
  emphstyle={\pipkw}, texcl=true, escapeinside={<(}{)>}}


\lstdefinestyle{program}{numbers=none, numberstyle=\tiny, numbersep=5pt, frame=tb, language=C}
\lstdefinestyle{example}{numbers=none, numberstyle=\tiny, numbersep=5pt, language=, frame=tRBl}
\lstdefinestyle{define}{frame=single, language=csh}

\title{Great Experiences with PiP} % Book title
\author{Atsushi Hori} % Author

%--------------------------------------------------------------------------------
\makeindex

\begin{document}
\maketitle

\newpage % Make sure the following content is on a new page

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTS
%----------------------------------------------------------------------------------------

\tableofcontents % Prints the table of contents
\lstlistoflistings
\listoffigures
\listoftables

\chapter{PiP Basics}

\input{intro/intro}
\input{tasks/tasks}
\input{spawn/spawn}
\input{sync/sync}
\input{commands/commands}
\input{discuss/discuss}
\input{summary/summary}

\chapter{PiP Advanced}

\comment{

  \input{exec-mode/exec-mode}
  \input{task-spawn/task-spawn}

  \appendix
  \chapter{PiP Installation}
  \input{install/install}
  \chapter{PiP Internals}
  \input{internals/internals}
  \chapter{Research Papers}
  \input{papers/papers}
  \bibliography{ref}
}

\printindex

\end{document}
