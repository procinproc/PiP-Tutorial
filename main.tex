\documentclass[a4paper,11pt,makeidx]{report} % Font size

\usepackage{makeidx}
\usepackage{color}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage[nohyphen]{underscore}
\usepackage{url}

\hypersetup{colorlinks=true}
%%% AH Macros
\long\def\comment#1{}
\def\pipkw{\tt\bf\color{blue}}%
\def\PIPKW#1{{\tt #1}}%
\def\pipterm#1{{\pipkw #1}\index{#1}}%
\def\PIPID{\pipterm{PIPID}}%
\def\NULL{\tt NULL}%
\def\option#1{$\langle$#1$\rangle$}

\lstloadlanguages{C,csh}

\lstset{basicstyle=\small\tt, numberbychapter=true, showstringspaces=false,
  emph={pip_get_pipid, pip_get_ntasks,
    pip_init, pip_fin,
    pip_spawn, pip_wait, pip_wait_any, pip_trywait, pip_trywait_any, 
    pip_task_spawn, pip_spawn_program_t,
    pip_spawn_from_func, pip_spawn_from_main,
    pip_spawn_hook, pip_spawn_hook_t,
    pip_named_export, pip_named_import, pip_exit, 
    pip_barrier_init, pip_barrier_wait, pip_barrier_fin,
    pip_barrier_t, pip_gettime, pip_gettid,
    {execution mode}, {process mode}, {pthread mode},
    {before hook}, {after hook},
    pip_glibc_lock, pip_glibc_unlock,
    PIP_PIPID_ROOT, PIP_PIPID_ANY, PIP_PIPID_MYSELF, 
    PIP_CPUCORE_ASIS, PIP_CPU_CORE_ABS,
    PIP_MODE_PTHREAD, PIP_MODE_PROCESS,
    PIP_PRELOAD,
    PIP_STOP_ON_START, PIP_GDB_SIGNALS, PIP_SHOW_MAPS,
    PIP_SHOW_PIPS, PIP_GDB_PATH, PIP_GDB_COMMAND,
    pip-exec, pipcc, pipfc, pip-mode, printpipmode, pip-gdb}, 
  emphstyle={\pipkw}, texcl=true, escapeinside={<(}{)>}}


\lstdefinestyle{program}{numbers=none, numberstyle=\tiny, numbersep=5pt, frame=tb, language=C}
\lstdefinestyle{example}{numbers=none, numberstyle=\tiny, numbersep=5pt, language=, frame=tRBl}
\lstdefinestyle{define}{frame=single, language=csh}

\title{Great Experiences with PiP} % Book title
\author{Atsushi Hori} % Author

%--------------------------------------------------------------------------------
\makeindex

\begin{document}
\maketitle

\newpage % Make sure the following content is on a new page

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTS
%----------------------------------------------------------------------------------------

\tableofcontents % Prints the table of contents
\lstlistoflistings
\listoffigures
\listoftables

\chapter*{Introduction}

\input{intro/intro}

\chapter{PiP Basics}\label{chap:basics}
\input{basics}
\input{tasks/tasks}
\input{spawn/spawn}
\input{sync/sync}
\input{commands/commands}
\input{summary/summary}
%\input{faq/faq}

\chapter{PiP Advanced}\label{chap:advanced}
\input{advanced}
\input{rationale/rationale}
\input{glibc/glibc}
\input{exec-mode/exec-mode}
\input{spawn-adv/spawn-adv}
\input{context/context}
\input{debug/debug}
\input{malloc/malloc}

\chapter{PiP Internals}
\comment{
  \input{internals/internals}
  \input{issues/issues}
}

\appendix
\chapter{PiP Installation}
\comment{
  \input{install/install}
  \chapter{Research Papers}
  \input{papers/papers}
  \bibliography{ref}
}

\printindex

\end{document}
